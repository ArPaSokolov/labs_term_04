<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}">

	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">

	<script type="text/javascript">
    	function fromUtcToLocal(timestamp) {
    		var theDate = new Date(Date.parse(timestamp));
    		document.write(theDate.toLocaleString());
    	}
    </script>
	
	<title>Все новости</title>
</head>
<body class="container">
<div class="col-md-12">
{% for story in stories %}
	<h2>{{story.title}}</h2>
	<p>
		<b>Автор:</b>
		<i>{{story.author.first_name + ' ' + story.author.last_name}}</i>
	</p>
	<p>{{story.content}}</p>
	<div>
		<span class="badge badge-dark">
			Создано:
			<script type="text/javascript">
			fromUtcToLocal('{{ story.created_on }} UTC')
			</script>
		</span>
		{% if story.updated_on != None %}
		<span class="badge badge-secondary">
			Изменено:
			<script type="text/javascript">
			fromUtcToLocal('{{ story.updated_on }} UTC')
			</script>
		</span>
		{% endif %}
		<div class="pull-right">
			{% for category in story.categories %}
				<span class="badge" style="color: white; background-color: #{{category.color}};">
					{{category.name}}
				</span>
			{% endfor %}
		</div>
	</div>
	<hr>
{% endfor %}
</div>	
<script src="{{ url_for('static', filename='js/jquery-3.5.1.slim.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/index.js') }}"></script>
</body>
</html>